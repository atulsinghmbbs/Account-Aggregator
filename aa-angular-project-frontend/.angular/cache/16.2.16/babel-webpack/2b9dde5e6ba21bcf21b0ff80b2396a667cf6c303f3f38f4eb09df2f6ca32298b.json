{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/consent.service\";\nimport * as i2 from \"../../services/notification.service\";\nimport * as i3 from \"@angular/router\";\nfunction ConsentListComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"div\", 19);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Loading consents...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ConsentListComponent_div_28_table_1_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 24);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"span\", 25);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\")(14, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function ConsentListComponent_div_28_table_1_tr_16_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const consent_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r6.viewDetails(consent_r5.consent_request_id));\n    });\n    i0.ɵɵtext(15, \" View Details \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const consent_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(consent_r5.consent_request_id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(consent_r5.customer_details.customer_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(consent_r5.customer_details.customer_mobile);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r4.getStatusClass(consent_r5.status));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", consent_r5.status, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(12, 6, consent_r5.created_at, \"short\"));\n  }\n}\nfunction ConsentListComponent_div_28_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\")(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Consent ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Customer Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Mobile\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Created At\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"tbody\");\n    i0.ɵɵtemplate(16, ConsentListComponent_div_28_table_1_tr_16_Template, 16, 9, \"tr\", 23);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.filteredConsents);\n  }\n}\nfunction ConsentListComponent_div_28_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"p\");\n    i0.ɵɵtext(2, \"No consents found\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ConsentListComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtemplate(1, ConsentListComponent_div_28_table_1_Template, 17, 1, \"table\", 21);\n    i0.ɵɵtemplate(2, ConsentListComponent_div_28_div_2_Template, 3, 0, \"div\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.filteredConsents.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.filteredConsents.length === 0);\n  }\n}\nexport let ConsentListComponent = /*#__PURE__*/(() => {\n  class ConsentListComponent {\n    consentService;\n    notificationService;\n    router;\n    consents = [];\n    filteredConsents = [];\n    loading = false;\n    searchTerm = '';\n    filterStatus = 'ALL';\n    constructor(consentService, notificationService, router) {\n      this.consentService = consentService;\n      this.notificationService = notificationService;\n      this.router = router;\n    }\n    ngOnInit() {\n      this.loadConsents();\n    }\n    loadConsents() {\n      this.loading = true;\n      this.consentService.getAllConsents().subscribe({\n        next: data => {\n          this.consents = data;\n          this.filteredConsents = data;\n          this.loading = false;\n        },\n        error: error => {\n          this.loading = false;\n          console.error('Error loading consents:', error);\n        }\n      });\n    }\n    onSearch() {\n      this.applyFilters();\n    }\n    onFilterChange() {\n      this.applyFilters();\n    }\n    applyFilters() {\n      this.filteredConsents = this.consents.filter(consent => {\n        const matchesSearch = !this.searchTerm || consent.customer_details.customer_name.toLowerCase().includes(this.searchTerm.toLowerCase()) || consent.customer_details.customer_mobile.includes(this.searchTerm) || consent.consent_request_id.toLowerCase().includes(this.searchTerm.toLowerCase());\n        const matchesStatus = this.filterStatus === 'ALL' || consent.status === this.filterStatus;\n        return matchesSearch && matchesStatus;\n      });\n    }\n    viewDetails(consentRequestId) {\n      this.router.navigate(['/consent/details', consentRequestId]);\n    }\n    getStatusClass(status) {\n      const statusMap = {\n        'PENDING': 'status-pending',\n        'REQUESTED': 'status-requested',\n        'ACTIVE': 'status-active',\n        'APPROVED': 'status-active',\n        'REJECTED': 'status-rejected',\n        'EXPIRED': 'status-expired',\n        'REVOKED': 'status-revoked'\n      };\n      return statusMap[status] || 'status-default';\n    }\n    refresh() {\n      this.loadConsents();\n      this.notificationService.showInfo('Refreshing consent list...');\n    }\n    static ɵfac = function ConsentListComponent_Factory(t) {\n      return new (t || ConsentListComponent)(i0.ɵɵdirectiveInject(i1.ConsentService), i0.ɵɵdirectiveInject(i2.NotificationService), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ConsentListComponent,\n      selectors: [[\"app-consent-list\"]],\n      decls: 29,\n      vars: 4,\n      consts: [[1, \"consent-list-container\"], [1, \"list-header\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"filters\"], [1, \"search-box\"], [\"type\", \"text\", \"placeholder\", \"Search by name, mobile, or consent ID...\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"filter-box\"], [3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"ALL\"], [\"value\", \"PENDING\"], [\"value\", \"REQUESTED\"], [\"value\", \"ACTIVE\"], [\"value\", \"APPROVED\"], [\"value\", \"REJECTED\"], [\"value\", \"EXPIRED\"], [\"value\", \"REVOKED\"], [\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"consent-table\", 4, \"ngIf\"], [1, \"loading\"], [1, \"spinner\"], [1, \"consent-table\"], [4, \"ngIf\"], [\"class\", \"no-data\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"consent-id\"], [1, \"status-badge\", 3, \"ngClass\"], [1, \"btn-small\", \"btn-info\", 3, \"click\"], [1, \"no-data\"]],\n      template: function ConsentListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n          i0.ɵɵtext(3, \"Consent Requests\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function ConsentListComponent_Template_button_click_4_listener() {\n            return ctx.refresh();\n          });\n          i0.ɵɵtext(5, \" \\uD83D\\uDD04 Refresh \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"div\", 3)(7, \"div\", 4)(8, \"input\", 5);\n          i0.ɵɵlistener(\"ngModelChange\", function ConsentListComponent_Template_input_ngModelChange_8_listener($event) {\n            return ctx.searchTerm = $event;\n          })(\"input\", function ConsentListComponent_Template_input_input_8_listener() {\n            return ctx.onSearch();\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"div\", 6)(10, \"select\", 7);\n          i0.ɵɵlistener(\"ngModelChange\", function ConsentListComponent_Template_select_ngModelChange_10_listener($event) {\n            return ctx.filterStatus = $event;\n          })(\"change\", function ConsentListComponent_Template_select_change_10_listener() {\n            return ctx.onFilterChange();\n          });\n          i0.ɵɵelementStart(11, \"option\", 8);\n          i0.ɵɵtext(12, \"All Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"option\", 9);\n          i0.ɵɵtext(14, \"Pending\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"option\", 10);\n          i0.ɵɵtext(16, \"Requested\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"option\", 11);\n          i0.ɵɵtext(18, \"Active\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"option\", 12);\n          i0.ɵɵtext(20, \"Approved\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"option\", 13);\n          i0.ɵɵtext(22, \"Rejected\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"option\", 14);\n          i0.ɵɵtext(24, \"Expired\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"option\", 15);\n          i0.ɵɵtext(26, \"Revoked\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(27, ConsentListComponent_div_27_Template, 4, 0, \"div\", 16);\n          i0.ɵɵtemplate(28, ConsentListComponent_div_28_Template, 3, 2, \"div\", 17);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngModel\", ctx.searchTerm);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngModel\", ctx.filterStatus);\n          i0.ɵɵadvance(17);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n        }\n      },\n      styles: [\".consent-list-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.list-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;font-size:2em}.filters[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:20px}.search-box[_ngcontent-%COMP%]{flex:1}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:5px;font-size:1em}.filter-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px;border:1px solid #ddd;border-radius:5px;font-size:1em;min-width:150px}.loading[_ngcontent-%COMP%]{text-align:center;padding:50px}.spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.consent-table[_ngcontent-%COMP%]{background:white;border-radius:10px;box-shadow:0 2px 10px #0000001a;overflow:hidden}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}thead[_ngcontent-%COMP%]{background-color:#34495e;color:#fff}th[_ngcontent-%COMP%]{padding:15px;text-align:left;font-weight:600}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ecf0f1;transition:background-color .3s}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}td[_ngcontent-%COMP%]{padding:15px}.consent-id[_ngcontent-%COMP%]{font-family:monospace;font-size:.9em;color:#7f8c8d}.status-badge[_ngcontent-%COMP%]{padding:5px 12px;border-radius:20px;font-size:.85em;font-weight:600;text-transform:uppercase}.status-pending[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.status-requested[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.status-active[_ngcontent-%COMP%]{background-color:#27ae60;color:#fff}.status-rejected[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.status-expired[_ngcontent-%COMP%]{background-color:#95a5a6;color:#fff}.status-revoked[_ngcontent-%COMP%]{background-color:#c0392b;color:#fff}.btn-small[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:5px;cursor:pointer;font-size:.9em;transition:background-color .3s}.btn-info[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background-color:#2980b9}.no-data[_ngcontent-%COMP%]{text-align:center;padding:50px;color:#7f8c8d}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;font-size:1em;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2980b9}@media (max-width: 768px){.filters[_ngcontent-%COMP%]{flex-direction:column}table[_ngcontent-%COMP%]{font-size:.9em}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px}}\"]\n    });\n  }\n  return ConsentListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}