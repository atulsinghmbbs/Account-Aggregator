{"ast":null,"code":"import { interval } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/consent.service\";\nimport * as i3 from \"../../services/fi.service\";\nimport * as i4 from \"../../services/notification.service\";\nexport let ConsentDetailsComponent = /*#__PURE__*/(() => {\n  class ConsentDetailsComponent {\n    route;\n    router;\n    consentService;\n    fiService;\n    notificationService;\n    consentRequestId;\n    consent = null;\n    fiRequests = [];\n    loading = false;\n    autoRefresh = false;\n    refreshSubscription;\n    constructor(route, router, consentService, fiService, notificationService) {\n      this.route = route;\n      this.router = router;\n      this.consentService = consentService;\n      this.fiService = fiService;\n      this.notificationService = notificationService;\n    }\n    ngOnInit() {\n      this.consentRequestId = this.route.snapshot.paramMap.get('id');\n      this.loadConsentDetails();\n      this.loadFiRequests();\n    }\n    ngOnDestroy() {\n      this.stopAutoRefresh();\n    }\n    loadConsentDetails() {\n      this.loading = true;\n      this.consentService.getConsentDetails(this.consentRequestId).subscribe({\n        next: data => {\n          this.consent = data;\n          this.loading = false;\n        },\n        error: error => {\n          this.loading = false;\n          console.error('Error loading consent details:', error);\n        }\n      });\n    }\n    loadFiRequests() {\n      this.fiService.getFiRequestsByConsent(this.consentRequestId).subscribe({\n        next: data => {\n          this.fiRequests = data;\n        },\n        error: error => {\n          console.error('Error loading FI requests:', error);\n        }\n      });\n    }\n    refresh() {\n      this.loadConsentDetails();\n      this.loadFiRequests();\n      this.notificationService.showInfo('Refreshing consent details...');\n    }\n    toggleAutoRefresh() {\n      this.autoRefresh = !this.autoRefresh;\n      if (this.autoRefresh) {\n        this.refreshSubscription = interval(10000).subscribe(() => {\n          this.loadConsentDetails();\n          this.loadFiRequests();\n        });\n        this.notificationService.showInfo('Auto-refresh enabled (every 10 seconds)');\n      } else {\n        this.stopAutoRefresh();\n        this.notificationService.showInfo('Auto-refresh disabled');\n      }\n    }\n    stopAutoRefresh() {\n      if (this.refreshSubscription) {\n        this.refreshSubscription.unsubscribe();\n        this.autoRefresh = false;\n      }\n    }\n    createFiRequest() {\n      this.router.navigate(['/fi/request', this.consentRequestId]);\n    }\n    viewFiData() {\n      this.router.navigate(['/fi/data', this.consentRequestId]);\n    }\n    viewFiRequestDetails(fiRequestId) {\n      this.router.navigate(['/fi/data', fiRequestId]);\n    }\n    getStatusClass(status) {\n      const statusMap = {\n        'PENDING': 'status-pending',\n        'REQUESTED': 'status-requested',\n        'ACTIVE': 'status-active',\n        'APPROVED': 'status-active',\n        'REJECTED': 'status-rejected',\n        'EXPIRED': 'status-expired',\n        'REVOKED': 'status-revoked'\n      };\n      return statusMap[status] || 'status-default';\n    }\n    canCreateFiRequest() {\n      return this.consent?.status === 'ACTIVE' || this.consent?.status === 'APPROVED';\n    }\n    goBack() {\n      this.router.navigate(['/consent/list']);\n    }\n    static ɵfac = function ConsentDetailsComponent_Factory(t) {\n      return new (t || ConsentDetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ConsentService), i0.ɵɵdirectiveInject(i3.FiService), i0.ɵɵdirectiveInject(i4.NotificationService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ConsentDetailsComponent,\n      selectors: [[\"app-consent-details\"]],\n      decls: 0,\n      vars: 0,\n      template: function ConsentDetailsComponent_Template(rf, ctx) {},\n      styles: [\".consent-details-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.details-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;flex-wrap:wrap;gap:15px}.details-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;font-size:2em;margin:0}.btn-back[_ngcontent-%COMP%]{padding:10px 20px;background-color:#95a5a6;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:1em;transition:background-color .3s}.btn-back[_ngcontent-%COMP%]:hover{background-color:#7f8c8d}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.loading[_ngcontent-%COMP%]{text-align:center;padding:50px}.spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.details-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.info-card[_ngcontent-%COMP%]{background:white;border-radius:10px;padding:25px;box-shadow:0 2px 10px #0000001a}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.3em;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #ecf0f1}.status-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.status-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;border-bottom-color:#ffffff4d}.status-info[_ngcontent-%COMP%]{text-align:center;padding:20px 0}.status-badge[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;font-size:.9em;font-weight:600;text-transform:uppercase;display:inline-block}.status-badge.large[_ngcontent-%COMP%]{padding:12px 24px;font-size:1.2em}.status-pending[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.status-requested[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.status-active[_ngcontent-%COMP%]{background-color:#27ae60;color:#fff}.status-rejected[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.status-expired[_ngcontent-%COMP%]{background-color:#95a5a6;color:#fff}.status-description[_ngcontent-%COMP%]{margin-top:15px;font-size:1.1em;opacity:.9}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.9em;font-weight:600;margin-bottom:5px;text-transform:uppercase}.info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#2c3e50;font-size:1em}.mono[_ngcontent-%COMP%]{font-family:Courier New,monospace;background-color:#ecf0f1;padding:5px 10px;border-radius:3px;font-size:.9em}.actions-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#11998e 0%,#38ef7d 100%);color:#fff}.actions-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;border-bottom-color:#ffffff4d}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:15px;flex-wrap:wrap}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:5px;cursor:pointer;font-size:1em;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:translateY(-2px)}.btn-secondary[_ngcontent-%COMP%]{background-color:#95a5a6;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#7f8c8d}.btn-success[_ngcontent-%COMP%]{background-color:#27ae60;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background-color:#229954;transform:translateY(-2px)}.btn-info[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:translateY(-2px)}.fi-requests-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:15px}.fi-requests-list[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#34495e;color:#fff}.fi-requests-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px;text-align:left;font-weight:600}.fi-requests-list[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ecf0f1}.fi-requests-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px}.btn-small[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:3px;cursor:pointer;font-size:.85em}.no-data[_ngcontent-%COMP%]{text-align:center;color:#7f8c8d;padding:30px}@media (max-width: 768px){.details-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.header-actions[_ngcontent-%COMP%]{width:100%;flex-direction:column}.header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}\"]\n    });\n  }\n  return ConsentDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}