{"ast":null,"code":"// import { Component, OnInit } from '@angular/core';\n// import { FormBuilder, FormGroup, Validators } from '@angular/forms';\n// import { Router } from '@angular/router';\n// import { ConsentService } from '../../services/consent.service';\n// import { NotificationService } from '../../services/notification.service';\n// import { ConsentRequestDTO } from '../../models/consent.model';\n// @Component({\n//   selector: 'app-consent-create',\n//   templateUrl: './consent-create.component.html',\n//   styleUrls: ['./consent-create.component.css']\n// })\n// export class ConsentCreateComponent implements OnInit {\n//   consentForm!: FormGroup;\n//   loading = false;\n//   templateId = 'CTMP250926152142855LYQ59RGKJTAGZ'; \n//   constructor(\n//     private fb: FormBuilder,\n//     private consentService: ConsentService,\n//     private notificationService: NotificationService,\n//     private router: Router\n//   ) {}\n//   ngOnInit(): void {\n//     this.initializeForm();\n//   }\n//   initializeForm() {\n//     const today = new Date();\n//     const oneYearLater = new Date(today.getFullYear() + 1, today.getMonth(), today.getDate());\n//     const oneYearAgo = new Date(today.getFullYear() - 1, today.getMonth(), today.getDate());\n//     this.consentForm = this.fb.group({\n//       customerName: ['', [Validators.required, Validators.minLength(3)]],\n//       customerEmail: ['', [Validators.required, Validators.email]],\n//       customerMobile: ['', [Validators.required, Validators.pattern('^[0-9]{10}$')]],\n//       customerRefId: [''],\n//       consentStartDate: [this.formatDate(today), Validators.required],\n//       consentExpiryDate: [this.formatDate(oneYearLater), Validators.required],\n//       fiStartDate: [this.formatDate(oneYearAgo), Validators.required],\n//       fiEndDate: [this.formatDate(today), Validators.required],\n//       fipIds: [['FINSHARE_BANK']],\n//       emailId: [''],\n//       dob: [''],\n//       showConsentInfo: [true],\n//       notifyCustomer: [true],\n//       customerNotificationMode: ['SMS']\n//     });\n//   }\n//   formatDate(date: Date): string {\n//     const year = date.getFullYear();\n//     const month = String(date.getMonth() + 1).padStart(2, '0');\n//     const day = String(date.getDate()).padStart(2, '0');\n//     return `${year}-${month}-${day}T00:00:00`;\n//   }\n//   onSubmit() {\n//     if (this.consentForm.invalid) {\n//       this.notificationService.showError('Please fill all required fields correctly');\n//       return;\n//     }\n//     this.loading = true;\n//     const formValue = this.consentForm.value;\n//     const request: ConsentRequestDTO = {\n//       customer_details: {\n//         customer_name: formValue.customerName,\n//         customer_email: formValue.customerEmail,\n//         customer_mobile: formValue.customerMobile,\n//         customer_identifier: formValue.customerMobile,\n//         customer_ref_id: formValue.customerRefId || undefined\n//       },\n//       customer_id: '',\n//       template_id: this.templateId,\n//       consent_details: {\n//         consent_start_date: formValue.consentStartDate,\n//         consent_expiry_date: formValue.consentExpiryDate,\n//         fi_start_date: formValue.fiStartDate,\n//         fi_end_date: formValue.fiEndDate,\n//         meta: {\n//           fip_ids: formValue.fipIds,\n//           email_id: formValue.emailId || undefined,\n//           dob: formValue.dob || undefined,\n//           show_consent_info: formValue.showConsentInfo\n//         }\n//       },\n//       notify_customer: formValue.notifyCustomer,\n//       customer_notification_mode: formValue.customerNotificationMode\n//     };\n//     this.consentService.createConsentRequest(request).subscribe({\n//       next: (response) => {\n//         this.loading = false;\n//         this.notificationService.showSuccess('Consent request created successfully!');\n//         this.router.navigate(['/consent/details', response.consent_request_id]);\n//       },\n//       error: (error) => {\n//         this.loading = false;\n//         console.error('Error creating consent:', error);\n//       }\n//     });\n//   }\n//   onCancel() {\n//     this.router.navigate(['/dashboard']);\n//   }\n// }","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}